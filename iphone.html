<html>
		<head>
					<title>Alaina's Home Automation lighting controller</title>

						<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
							<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
								<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
										
										
										<script type="text/javascript">
														var curTime = Math.round(new Date().getTime() / 1000);
																var lastTouch = Math.round(new Date().getTime() / 1000);
																		waitingPeriod = 600; // in seconds
																				
																				$(document).ready(function() {

																									setInterval( function() {
																															curTime = Math.round(new Date().getTime() / 1000);
																																			if (curTime > (lastTouch + waitingPeriod))
																																							{
																																														console.log ("curTime = " + curTime);
																																																			console.log ("lastTouch = " + lastTouch);
																																																								console.log("Timeout");
																																																													$('.live').hide();
																																																																		$('.screensaver').show();
																																																																						}
																																																																									}, 1000 );
																																																																												$(".screensaver").click (function () {
																																																																																		$('.live').show();
																																																																																						$('.screensaver').hide();
																																																																																										lastTouch = Math.round(new Date().getTime() / 1000);
																																																																																													});
																																																																																																																																																																		$('.control-button').click(function () {
																																																																																																																																																																								lastTouch = Math.round(new Date().getTime() / 1000);
																																																																																																																																																																												$.get('talk-to-train-overlord.php?cmd[]=' + $(this).attr('data-cmd'), function (response) {
																																																																																																																																																																																		if ($(this).hasClass('on'))
																																																																																																																																																																																						{
																																																																																																																																																																																													$('.control-button').removeClass('on');
																																																																																																																																																																																																		$(this).addClass('off');
																																																																																																																																																																																																						} else {
																																																																																																																																																																																																											$('.control-button').removeClass('on');
																																																																																																																																																																																																																$('.control-button').addClass('off');
																																																																																																																																																																																																																					$(this).removeClass('off');
																																																																																																																																																																																																																										$(this).addClass('on');
																																																																																																																																																																																																																														}
																																																																																																																																																																																																																																		});

																																																																																																																																																																																																																																					});
																																																																																																																																																																																																																																							});
																																																																																																																																																																																																																																								</script>
																																																																																																																																																																																																																																									<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
																																																																																																																																																																																																																																										<style type="text/css">
																																																																																																																																																																																																																																															body {
																																																																																																																																																																																																																																																					width: 100%;
																																																																																																																																																																																																																																																									height: 100%;
																																																																																																																																																																																																																																																													background-color: black;
																																																																																																																																																																																																																																																																	overflow: hidden;
																																																																																																																																																																																																																																																																				}
																																																																																																																																																																																																																																																																							div{
																																																																																																																																																																																																																																																																									/*			  clear:both!important;
																																																																																																																																																																																																																																																																												  display:block!important;
																																																																																																																																																																																																																																																																												  			  width:100%!important;
																																																																																																																																																																																																																																																																															  			  float:none!important;
																																																																																																																																																																																																																																																																																		  			  margin:0!important;
																																																																																																																																																																																																																																																																																					  			  padding:0!important;*/
																																																																																																																																																																																																																																																																																								  			}
																																																																																																																																																																																																																																																																																														#container {
																																																																																																																																																																																																																																																																																																				width: 100%;
																																																																																																																																																																																																																																																																																																								height: 100%;
																																																																																																																																																																																																																																																																																																												background-color: black;
																																																																																																																																																																																																																																																																																																																overflow: hidden;
																																																																																																																																																																																																																																																																																																																			}
																																																																																																																																																																																																																																																																																																																						.live {
																																																																																																																																																																																																																																																																																																																												text-align: center;
																																																																																																																																																																																																																																																																																																																																width: 100%;
																																																																																																																																																																																																																																																																																																																																				height: 100%;
																																																																																																																																																																																																																																																																																																																																								position: absolute;
																																																																																																																																																																																																																																																																																																																																												top: 0%;
																																																																																																																																																																																																																																																																																																																																															}
																																																																																																																																																																																																																																																																																																																																																		.screensaver {
																																																																																																																																																																																																																																																																																																																																																								display: none;
																																																																																																																																																																																																																																																																																																																																																												position: absolute;
																																																																																																																																																																																																																																																																																																																																																																width: 100%;
																																																																																																																																																																																																																																																																																																																																																																				height: 100%;
																																																																																																																																																																																																																																																																																																																																																																								text-align: center;
																																																																																																																																																																																																																																																																																																																																																																												bottom: 10%;
																																																																																																																																																																																																																																																																																																																																																																															}
																																																																																																																																																																																																																																																																																																																																																																																		.screensaver span {
																																																																																																																																																																																																																																																																																																																																																																																								font-weight: bold;
																																																																																																																																																																																																																																																																																																																																																																																												font-family: "Arial", "Helvetica", "Verdana"; 
																																																																																																																																																																																																																																																																																																																																																																																																font-size: 6em;
																																																																																																																																																																																																																																																																																																																																																																																																				position: relative;
																																																																																																																																																																																																																																																																																																																																																																																																								top: 30%;
																																																																																																																																																																																																																																																																																																																																																																																																												color: white;
																																																																																																																																																																																																																																																																																																																																																																																																															}
																																																																																																																																																																																																																																																																																																																																																																																																																		.control-button {
																																																																																																																																																																																																																																																																																																																																																																																																																								width: 25%;
																																																																																																																																																																																																																																																																																																																																																																																																																												height: 50%;
																																																																																																																																																																																																																																																																																																																																																																																																																																text-align: center;
																																																																																																																																																																																																																																																																																																																																																																																																																																				margin: 0px;
																																																																																																																																																																																																																																																																																																																																																																																																																																								float: left;
																																																																																																																																																																																																																																																																																																																																																																																																																																											}
																																																																																																																																																																																																																																																																																																																																																																																																																																														.control-button span {
																																																																																																																																																																																																																																																																																																																																																																																																																																																				font-weight: bold;
																																																																																																																																																																																																																																																																																																																																																																																																																																																								font-family: "Arial", "Helvetica", "Verdana"; 
																																																																																																																																																																																																																																																																																																																																																																																																																																																												font-size: 3em;
																																																																																																																																																																																																																																																																																																																																																																																																																																																																position: relative;
																																																																																																																																																																																																																																																																																																																																																																																																																																																																				top: 40%;
																																																																																																																																																																																																																																																																																																																																																																																																																																																																							}
																																																																																																																																																																																																																																																																																																																																																																																																																																																																										.on {
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																background-color: green;
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																			}
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																						.off {
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												background-color: red;
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																															}
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																</style>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																														</head>

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																														<body>

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																<div class="container">

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																			<div class="live">
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							<!--<div id="switch"></div>-->
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																									<div data-cmd="F" id="button-forward" class="control-button off"><span>Forward</span></div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																											<div data-cmd="B" id="button-backward" class="control-button off"><span>Backward</span></div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																													<div data-cmd="U" id="button-winch-up" class="control-button off"><span>Winch up</span></div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																															<div data-cmd="M" id="button-winch-down" class="control-button off"><span>Winch down</span></div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																	<div data-cmd="s" id="button-stop-train" class="control-button off"><span>Stop fwd/bkwd</span></div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																			<div data-cmd="j" id="button-stop-winch" class="control-button off"><span>Stop winch</span></div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																					<div data-cmd="S" id="button-stop-all" class="control-button off"><span>Stop all</span></div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							<div data-cmd="R" id="button-reset" class="control-button off"><span>Reset</span></div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								</div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																									<div class="screensaver">
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																													<span>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																	Screen saver
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																			</span>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				</div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		</div>

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																</body>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																														</html>

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																														              

